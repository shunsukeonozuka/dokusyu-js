<!DOCTYPE html>
<html>
    <head>
        <title>Todoアプリ</title>
        <style>
            /* ③用のスタイル */
            .completed > span {
                text-decoration: line-through;
                background-color: gray;
            }
        </style>
    </head>
    <body>
        <div id="todo-container">
            <input type="text" name="" id="create-input" />
            <button id="create-btn">追加</button>
            <ul id="todo-list">
                <!-- ここに.todo-itemを追加 -->
            </ul>
        </div>
        <template id="todo-item-tmpl">
            <li class="todo-item">
                <!-- #todo-listに追加する元となるテンプレート -->
                <span class="todo-title"></span>
                <input type="button" class="delete-btn" value="削除" />
                <input type="button" class="complete-btn" value="完了" />
            </li>
        </template>
        <script>
            // #todo-list要素を取得
            const todoList = document.querySelector("#todo-list");

            // テンプレートを取得
            const todoItemTmpl = document.querySelector("#todo-item-tmpl");

            // テンプレートのcontent（.todo-item要素）を取得
            const todoItem = todoItemTmpl.content;

            // ①Todoアイテムを追加する関数
            function createTodoItem(title) {
                // todoItemを複製
                const newItem = todoItem.cloneNode(true);
                // 入力欄の要素を取得
                const newTitle = newItem.querySelector(".todo-title");
                // タイトルを設定
                newTitle.textContent = title;
                // Todoリストの末尾に追加
                todoList.append(newItem);
            }

            // テストコード
            createTodoItem("1つ目");
            createTodoItem("2つ目");
            createTodoItem("3つ目");

            // ②Todoアイテムを削除する関数
            function deleteTodoItem(todoItem) {
                // 渡された要素（todoItem）を削除
                todoItem.remove();
            }

            // テストコード
            setTimeout(() => {
                deleteTodoItem(todoList.firstElementChild);
            }, 2000);

            // ③Todoアイテムを完了とする関数
            function compTodoItem(todoItem) {
                // 渡された要素のクラスに対してcompletedを付け外し
                todoItem.classList.toggle("completed");
            }

            // テストコード
            setTimeout(() => {
                compTodoItem(todoList.firstElementChild);
            }, 5000);
        </script>
    </body>
</html>
